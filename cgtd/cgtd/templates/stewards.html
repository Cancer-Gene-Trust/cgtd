{% extends "base.html" %}
{% block content %}
<h3>Stewards</h3>
<ul id="stewards-list" class="list-group">
</ul>

<script type="text/html" id="stewards-list-template">
<% _.each(stewards, function(steward) { %>
  <li class="list-group-item">
    <a class="font-weight-bold m-r-8" href="/steward.html?multihash=<%= steward.multihash %>">
        <%= steward.domain %>
        <%= steward.peers %>
        <%= steward.id %>
    </a>
    <span class="badge"><%= steward.submissions.length %></span>
  </li>
<% }) %>
</script>
<script>
var stewardsListTemplate = _.template($("#stewards-list-template").html());
$("#progressDialog").modal("show");
$("#progress").html("Finding and authenticating stewards...");
$.getJSON("/v0/stewards", function(data) {
  $("#progressDialog").modal("hide");
  if (data.stewards.length == 0) {
    alert("No stewards found");
  } else {
    $("#stewards-list").html(stewardsListTemplate({stewards: data.stewards}));
  }
});
</script>
{% endblock %}
